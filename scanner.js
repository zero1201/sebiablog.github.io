document.addEventListener('DOMContentLoaded',()=>{const logList=document.getElementById('log-list');const loader=document.getElementById('loader');const NEW_EXPIRE_DAYS=2;const expireMs=NEW_EXPIRE_DAYS*24*60*60*1000;function saveFoundTime(filename){const logs=JSON.parse(localStorage.getItem("foundLogs")||"{}");logs[filename]=Date.now();localStorage.setItem("foundLogs",JSON.stringify(logs))}function isNewFile(filename){const logs=JSON.parse(localStorage.getItem("foundLogs")||"{}");if(!logs[filename])return true;return(Date.now()-logs[filename])<expireMs}async function probe(url){try{const response=await fetch(url,{method:'HEAD'});return response.ok}catch(e){return false}}async function extractTitle(url){try{const response=await fetch(url);const htmlText=await response.text();const titleMatch=htmlText.match(/<title>([\s\S]*?)<\/title>/i);return titleMatch?titleMatch[1].trim():"UNTITLED_LOG"}catch(e){return"ACCESS_DENIED"}}async function startScan(){let filesFound=0;const maxProbes=100;for(let i=1;i<=maxProbes;i++){const filename=`./blog${i}.html`;loader.textContent=`Pinging ${filename}...`;const exists=await probe(filename);if(exists){filesFound++;loader.textContent=`Target locked: ${filename}. Extracting metadata...`;const title=await extractTitle(filename);const listItem=document.createElement('li');const link=document.createElement('a');link.href=filename;link.textContent=title;listItem.appendChild(link);if(isNewFile(filename)){const newBadge=document.createElement('span');newBadge.textContent=" NEW";newBadge.style.color="#ff0033";newBadge.style.fontWeight="bold";newBadge.style.marginLeft="10px";newBadge.style.textShadow="0 0 6px #ff0033, 0 0 10px #ff0000";listItem.appendChild(newBadge);saveFoundTime(filename)}logList.prepend(listItem)}else{loader.textContent=`Scan complete. No response from blog${i}.html.`;break}}setTimeout(()=>{loader.textContent=filesFound>0?`Operation finished. ${filesFound} log(s) found. Standing by.`:`Operation finished. No logs found. Standing by.`},1000)}startScan()});
